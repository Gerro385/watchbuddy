<div class="container" style="margin-top: 50px">
  <%= link_to 'Back', url_for(:back), class: "btn btn-outline-spacegreen" %>
  <div class="d-flex border">
      <div class="card-trip rounded" style="width: 350px;">
          <img class="card-img-show" src="<%= @medium.poster %>">
      </div>
      <div class="card-trip-infos border p-3">
        <div>
          <div class="card-body">
            <div class="d-flex justify-content-between relativdiv">
              <div class="d-flex">
              <h1 class="card-title" style="margin-left: -20px;"><%= @medium.title %>
                <% image_tag = @medium.watches.first&.favourite ? "pictograms/diamond-heart-filled" : "pictograms/diamond-heart-empty" %>
                <%= link_to cl_image_tag(image_tag), like_path(@medium, show: true), { :id => "#{@medium.id}", :class => "button-favorite", 'data-toggle' => 'tooltip', 'data-placement' => 'bottom', :title => 'favorite' } %>
                <% image_tag = @medium.watches.first&.watchlist ? "pictograms/watchlist-filled" : "pictograms/watchlist-empty" %>
                <%= link_to cl_image_tag(image_tag), watchlist_path(@medium, show: true), { :id => "#{@medium.id}", :class => "button-watchlist", 'data-toggle' => 'tooltip', 'data-placement' => 'bottom', :title => 'watchlist' }  %>
                <% tick_image_tag = @medium.watches.first&.seen ? "pictograms/tick-filled" : "pictograms/tick-empty" %>
                <%= link_to cl_image_tag(tick_image_tag), seen_path(@medium, show: true), { :id => "#{@medium.id}", :class => "button-tick", 'data-toggle' => 'tooltip', 'data-placement' => 'bottom', :title => 'seen' } %>
              </h1>
              </div>
              <div class="text-right rating-section">
                <p class="card-text">Watchbuddy <img src="https://res.cloudinary.com/g385/image/upload/v1598863329/Pictograms/star-filled.png" alt="star"> <%= @medium.rating %></p>
                <p class="card-text">Buddys <img src="https://res.cloudinary.com/g385/image/upload/v1598863329/Pictograms/star-filled.png" alt="star"> <%= @medium.rating %></p>
                <div class="d-flex justify-content-end">
                  <span id="yourtag"><p class="card-text">Your <img id="your-rating" src="<%= !@watch.nil? && @watch.rating ? "https://res.cloudinary.com/g385/image/upload/v1598863329/Pictograms/star-filled.png" : "https://res.cloudinary.com/g385/image/upload/v1598863329/Pictograms/star-empty.png" %>" alt="star"></p></span><p id="ratingnum"> <%= !@watch.nil? && @watch.rating ? @watch.rating : "--" %></p></span>
                </div>
              </div>
                <div class="rating-popup d-none">
                  <div class="d-flex flex-column align-items-center">
                    <label for="ratingslide">Your Rating</label>
                    <p id="rating" class="mb-1"><%= @medium.rating %></p>
                    <input type="range" class="form-control-range" min="0" max="10" value="<%= @medium.rating %>" step="0.1" id="ratingslide">
                    <textarea type="text" cols="5" rows="5" id="ratingdesc" maxlength="200" placeholder="Your review..."></textarea>
                    <%= link_to "Rate", rate_path(@medium, show: true), id: "#{@medium.id}" , class: "btn my-2 btn-outline-spacegreen ratebtn" %>
                  </div>
                </div>
            </div>
          </div>



          <div class="d-flex" style="margin-top: -50px; max-width: 620px;">
            <div class="card-text d-flex" class="text-muted">
              <p id="duration" class="mr-1"><%= cl_image_tag("pictograms/clock-gray") %> <%= @medium.runtime %> min</p>
              <p id="language" class="ml-2 mr-1"><%= cl_image_tag("pictograms/language-gray") %> <%= @medium.language %></p>
              <p id="origin" class="ml-2 mr-1"><%= cl_image_tag("pictograms/globe-gray") %> <%= @medium.origin_countries.join(", ") %></p>
              <p id="origin" class="ml-2 mr-1"><%= cl_image_tag("pictograms/masks-gray") %> <%= @medium.genres.join(", ") %></p>
              <p id="seasons" class="ml-2 mr-1"><%= cl_image_tag("pictograms/tv-gray") if @medium.total_seasons %> <%= @medium.total_seasons if @medium.total_seasons %></p>
            </div>
          </div>
          <div class="row mb-3 ml-1">
            <div class="col-1 justify-content-center"><strong>
              <h3><i class="fas fa-language"></i></h3>
              <h3><i class="fas fa-globe-africa"></i></h3>
              <h3><i class="fas fa-theater-masks"></i></h3>
              <h3><i class="far fa-calendar-check"></i></h3>
              <p class="card-text"><%="Seasons:" if @medium.total_seasons %></p>
            </strong></div>
            <div class="col">
              <p class="card-text"><%= @medium.language %></p>
              <p class="card-text"><%= @medium.origin_countries.join(", ") %></p>
              <p class="card-text"><%= @medium.genres.join(", ") %></p>
              <p class="card-text"><%= @medium.first_air_date.strftime("%B %Y") if @medium.media_type !="tv" %></p>
              <p class="card-text"><%= @medium.first_air_date.strftime("%B %Y") + " - " + @medium.last_air_date.strftime("%B %Y") if  @medium.media_type =="tv" %></p>
              <p class="card-text ml-3"><%= @medium.total_seasons if @medium.total_seasons %></p>
            </div>
          </div>
            <% @medium.description.length > 500 ? dots = "..." : dots = ""  %>
            <p class="card-text"><%= @medium.description.slice(0..500) + dots %></p>
          </div>
        </div>
      </div>
  </div>
</div>
